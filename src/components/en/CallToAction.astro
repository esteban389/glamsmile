<section class="cta" id="cta-section">
	<div class="cta-background">
		<video
			class="cta-video"
			autoplay
			muted
			loop
			playsinline
			poster="/assets/agendar-cita.jpg"
			aria-hidden="true"
		>
			<source src="/assets/agendar-cita.mp4" type="video/mp4">
		</video>
		<div class="video-overlay"></div>
	</div>
</section>

<script>
	// Simple threshold detection for heartbeat animation
	const ctaSection = document.getElementById('cta-section');
	const floatingButton = document.querySelector('.floating-contact');
	
	if (ctaSection && floatingButton) {
		const observer = new IntersectionObserver((entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting && entry.intersectionRatio > 0.3) {
					floatingButton.classList.add('heartbeat-mode');
				} else {
					floatingButton.classList.remove('heartbeat-mode');
				}
			});
		}, {
			threshold: 0.3
		});
		
		observer.observe(ctaSection);
	}
</script>

<style>
	.cta {
		position: relative;
		min-height: 100vh;
		overflow: hidden;
	}

	.cta-background {
		position: relative;
		width: 100%;
		height: 100vh;
	}

	.cta-video {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		object-fit: cover;
		z-index: 1;
	}

	.video-overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(
			135deg,
			rgba(0, 0, 0, 0.3) 0%,
			rgba(0, 0, 0, 0.1) 50%,
			rgba(0, 0, 0, 0.4) 100%
		);
		z-index: 2;
		pointer-events: none;
	}

	@media (max-width: 768px) {
		.cta {
			min-height: 70vh;
		}

		.cta-background {
			height: 70vh;
		}
	}
</style>
